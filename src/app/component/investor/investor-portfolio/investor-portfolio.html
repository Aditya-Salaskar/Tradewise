<div class="dashboard-container">
  <main class="main-content">
    <header>
      <h2>Portfolio Details</h2>
    </header>

    <!-- Summary Cards -->
    <section class="stats" *ngIf="portfolioSummary$ | async as summary">
      <div class="card">
        <h3>Total Portfolio Value</h3>
        <p>₹{{ summary.totalValue | number }}</p>
      </div>
      <div class="card">
        <h3>Total Gain/Loss</h3>
        <p [ngClass]="summary.totalGainLoss >= 0 ? 'gain' : 'loss'">₹{{ summary.totalGainLoss | number }}</p>
      </div>
      <div class="card">
        <h3>Total Holdings</h3>
        <p>{{ (filteredHoldings$ | async)?.length }}</p>
      </div>
    </section>

    <!-- Filter Tabs -->
    <section class="filter-tabs">
      <button [class.active-tab]="activeFilter === 'All'" (click)="filterHoldings('All')">All</button>
      <button [class.active-tab]="activeFilter === 'Equity'" (click)="filterHoldings('Equity')">Equity</button>
      <button [class.active-tab]="activeFilter === 'Bond'" (click)="filterHoldings('Bond')">Bonds</button>
    </section>

    <!-- Holdings Table -->
    <section class="table-section">
      <h3>Holdings</h3>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Symbol</th>
              <th>Name</th>
              <th>Type</th>
              <th>Quantity</th>
              <th>Avg Price</th>
              <th>Current Price</th>
              <th>Value</th>
              <th>Gain/Loss</th>
              <th>Return %</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let holding of (filteredHoldings$ | async)">
              <td>{{ holding.symbol }}</td>
              <td>{{ holding.name }}</td>
              <td>{{ holding.type }}</td>
              <td>{{ holding.quantity }}</td>
              <td>₹{{ holding.avgPrice | number }}</td>
              <td>₹{{ holding.currentPrice | number }}</td>
              <td>₹{{ holding.value | number }}</td>
              <td [ngClass]="holding.gainLoss >= 0 ? 'gain' : 'loss'">₹{{ holding.gainLoss | number }}</td>
              <td [ngClass]="holding.gainLossPercent >= 0 ? 'gain' : 'loss'">
                {{ holding.gainLossPercent >= 0 ? '+' : ''}}{{ holding.gainLossPercent }}%
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>
